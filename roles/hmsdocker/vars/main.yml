
#######################################################################
# Computed variables
# DO NOT MODIFY unless you want stuff to break
# But if you know of another way to write this then pls help because this is ugly
# These are used to generate the `docker-compose` template, this helps keep the amount of in-line logic in the template to a minimum and keeps it clean(ish)

# Container computed variables
# Controls if a container is enabled
hmsdocker_container_enabled_portainer: "{{ hms_docker_container_map['portainer']['enabled'] | default(False) }}"
hmsdocker_container_enabled_traefik: "{{ hms_docker_container_map['traefik']['enabled'] | default(False) }}"
hmsdocker_container_enabled_authentik: "{{ hms_docker_container_map['authentik']['enabled'] | default(False) }}"
hmsdocker_container_enabled_sonarr: "{{ hms_docker_container_map['sonarr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_radarr: "{{ hms_docker_container_map['radarr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_bazarr: "{{ hms_docker_container_map['bazarr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_transmission: "{{ hms_docker_container_map['transmission']['enabled'] | default(False) and (hmsdocker_vpn_provider is defined and hmsdocker_vpn_user is defined and hmsdocker_vpn_pass is defined) | default(False) }}"
hmsdocker_container_enabled_overseerr: "{{ hms_docker_container_map['overseerr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_prowlarr: "{{ hms_docker_container_map['prowlarr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_requestrr: "{{ hms_docker_container_map['requestrr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_plex: "{{ hms_docker_container_map['plex']['enabled'] | default(False) }}"
hmsdocker_container_enabled_tautulli: "{{ hms_docker_container_map['tautulli']['enabled'] | default(False) }}"
hmsdocker_container_enabled_nzbget: "{{ hms_docker_container_map['nzbget']['enabled'] | default(False) }}"
hmsdocker_container_enabled_sabnzbd: "{{ hms_docker_container_map['sabnzbd']['enabled'] | default(False) }}"
hmsdocker_container_enabled_tdarr: "{{ hms_docker_container_map['tdarr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_homepage: "{{ hms_docker_container_map['homepage']['enabled'] | default(False) }}"
hmsdocker_container_enabled_tailscale: "{{ tailscale_enabled | default(False) }}"
# The FlareSolverr `flaresolverr_enabled` variable in `cloudflare.yml` was removed on 5/10/2025. Enabling this container is now controlled in the container map
hmsdocker_container_enabled_flaresolverr: "{{ flaresolverr_enabled | default(False) or hms_docker_container_map['flaresolverr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_uptimekuma: "{{ hms_docker_container_map['uptimekuma']['enabled'] | default(False) }}"
hmsdocker_container_enabled_heimdall: "{{ hms_docker_container_map['heimdall']['enabled'] | default(False) }}"
hmsdocker_container_enabled_readarr: "{{ hms_docker_container_map['readarr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_kavita: "{{ hms_docker_container_map['kavita']['enabled'] | default(False) }}"
hmsdocker_container_enabled_calibre: "{{ hms_docker_container_map['calibre']['enabled'] | default(False) }}"
hmsdocker_container_enabled_jellyfin: "{{ hms_docker_container_map['jellyfin']['enabled'] | default(False) }}"
hmsdocker_container_enabled_emby: "{{ hms_docker_container_map['emby']['enabled'] | default(False) }}"
hmsdocker_container_enabled_maintainerr: "{{ hms_docker_container_map['maintainerr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_unpackerr: "{{ hms_docker_container_map['unpackerr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_lidarr: "{{ hms_docker_container_map['lidarr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_autobrr: "{{ hms_docker_container_map['autobrr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_notifiarr: "{{ hms_docker_container_map['notifiarr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_speedtest: "{{ hms_docker_container_map['speedtest-tracker']['enabled'] | default(False) }}"
hmsdocker_container_enabled_recyclarr: "{{ hms_docker_container_map['recyclarr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_tinymediamanager: "{{ hms_docker_container_map['tinymediamanager']['enabled'] | default(False) }}"
hmsdocker_container_enabled_pasta: "{{ hms_docker_container_map['pasta']['enabled'] | default(False) }}"
hmsdocker_container_enabled_netdata: "{{ hms_docker_container_map['netdata']['enabled'] | default(False) }}"
hmsdocker_container_enabled_wizarr: "{{ hms_docker_container_map['wizarr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_jellyseerr: "{{ hms_docker_container_map['jellyseerr']['enabled'] | default(False) }}"
hmsdocker_container_enabled_qbittorrent: "{{ hms_docker_container_map['qbittorrent']['enabled'] | default(False) }}"
hmsdocker_container_enabled_deluge: "{{ hms_docker_container_map['deluge']['enabled'] | default(False) }}"


# Traefik computed variables
# Controls if Traefik is enabled for a container
hmsdocker_traefik_enabled_traefik: "{{ hms_docker_container_map['traefik']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_portainer: "{{ hms_docker_container_map['portainer']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_authentik: "{{ hms_docker_container_map['authentik']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_sonarr: "{{ hms_docker_container_map['sonarr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_radarr: "{{ hms_docker_container_map['radarr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_bazarr: "{{ hms_docker_container_map['bazarr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_transmission: "{{ hms_docker_container_map['transmission']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_overseerr: "{{ hms_docker_container_map['overseerr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_prowlarr: "{{ hms_docker_container_map['prowlarr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_requestrr: "{{ hms_docker_container_map['requestrr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_plex: "{{ hms_docker_container_map['plex']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_tautulli: "{{ hms_docker_container_map['tautulli']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_nzbget: "{{ hms_docker_container_map['nzbget']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_sabnzbd: "{{ hms_docker_container_map['sabnzbd']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_tdarr: "{{ hms_docker_container_map['tdarr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_homepage: "{{ hms_docker_container_map['homepage']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_uptimekuma: "{{ hms_docker_container_map['uptimekuma']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_heimdall: "{{ hms_docker_container_map['heimdall']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_readarr: "{{ hms_docker_container_map['readarr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_kavita: "{{ hms_docker_container_map['kavita']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_calibre: "{{ hms_docker_container_map['calibre']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_jellyfin: "{{ hms_docker_container_map['jellyfin']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_emby: "{{ hms_docker_container_map['emby']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_maintainerr: "{{ hms_docker_container_map['maintainerr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_lidarr: "{{ hms_docker_container_map['lidarr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_autobrr: "{{ hms_docker_container_map['autobrr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_notifiarr: "{{ hms_docker_container_map['notifiarr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_speedtest: "{{ hms_docker_container_map['speedtest-tracker']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_tinymediamanager: "{{ hms_docker_container_map['tinymediamanager']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_pasta: "{{ hms_docker_container_map['pasta']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_wizarr: "{{ hms_docker_container_map['wizarr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_jellyseerr: "{{ hms_docker_container_map['jellyseerr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_qbittorrent: "{{ hms_docker_container_map['qbittorrent']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_deluge: "{{ hms_docker_container_map['deluge']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_tubearchivist: "{{ hms_docker_container_map['tubearchivist']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_huntarr: "{{ hms_docker_container_map['huntarr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_pinchflat: "{{ hms_docker_container_map['pinchflat']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"
hmsdocker_traefik_enabled_checkrr: "{{ hms_docker_container_map['checkrr']['traefik'] | default(False) and hmsdocker_container_enabled_traefik }}"


# Public container exposure computed variables
# Controls Traefik rules to allow/disallow accessing the containers from the public internet via an allowlist
hmsdocker_expose_public_enabled_portainer: "{{ hms_docker_container_map['portainer']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_authentik: "{{ hms_docker_container_map['authentik']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_sonarr: "{{ hms_docker_container_map['sonarr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_radarr: "{{ hms_docker_container_map['radarr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_bazarr: "{{ hms_docker_container_map['bazarr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_transmission: "{{ hms_docker_container_map['transmission']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_overseerr: "{{ hms_docker_container_map['overseerr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_prowlarr: "{{ hms_docker_container_map['prowlarr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_requestrr: "{{ hms_docker_container_map['requestrr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_plex: "{{ hms_docker_container_map['plex']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_tautulli: "{{ hms_docker_container_map['tautulli']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_nzbget: "{{ hms_docker_container_map['nzbget']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_sabnzbd: "{{ hms_docker_container_map['sabnzbd']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_tdarr: "{{ hms_docker_container_map['tdarr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_homepage: "{{ hms_docker_container_map['homepage']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_uptimekuma: "{{ hms_docker_container_map['uptimekuma']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_heimdall: "{{ hms_docker_container_map['heimdall']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_readarr: "{{ hms_docker_container_map['readarr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_kavita: "{{ hms_docker_container_map['kavita']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_calibre: "{{ hms_docker_container_map['calibre']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_jellyfin: "{{ hms_docker_container_map['jellyfin']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_emby: "{{ hms_docker_container_map['emby']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_maintainerr: "{{ hms_docker_container_map['maintainerr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_lidarr: "{{ hms_docker_container_map['lidarr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_autobrr: "{{ hms_docker_container_map['autobrr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_notifiarr: "{{ hms_docker_container_map['notifiarr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_speedtest: "{{ hms_docker_container_map['speedtest-tracker']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_tinymediamanager: "{{ hms_docker_container_map['tinymediamanager']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_pasta: "{{ hms_docker_container_map['pasta']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_wizarr: "{{ hms_docker_container_map['wizarr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_jellyseerr: "{{ hms_docker_container_map['jellyseerr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_qbittorrent: "{{ hms_docker_container_map['qbittorrent']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_deluge: "{{ hms_docker_container_map['deluge']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_tubearchivist: "{{ hms_docker_container_map['tubearchivist']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_huntarr: "{{ hms_docker_container_map['huntarr']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_pinchflat: "{{ hms_docker_container_map['pinchflat']['expose_to_public'] | default(False) }}"
hmsdocker_expose_public_enabled_checkrr: "{{ hms_docker_container_map['checkrr']['expose_to_public'] | default(False) }}"


# Container host port mapping computed variables
# Controls if the container "exposes" its ports on the host
hmsdocker_expose_ports_enabled_portainer: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_portainer) else False }}"
hmsdocker_expose_ports_enabled_authentik: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_authentik) else False }}"
hmsdocker_expose_ports_enabled_sonarr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_sonarr) else False }}"
hmsdocker_expose_ports_enabled_radarr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_radarr) else False }}"
hmsdocker_expose_ports_enabled_bazarr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_bazarr) else False }}"
hmsdocker_expose_ports_enabled_transmission: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_transmission) else False }}"
hmsdocker_expose_ports_enabled_overseerr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_overseerr) else False }}"
hmsdocker_expose_ports_enabled_prowlarr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_prowlarr) else False }}"
hmsdocker_expose_ports_enabled_requestrr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_requestrr) else False }}"
hmsdocker_expose_ports_enabled_plex: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_plex) else False }}"
hmsdocker_expose_ports_enabled_tautulli: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_tautulli) else False }}"
hmsdocker_expose_ports_enabled_nzbget: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_nzbget) else False }}"
hmsdocker_expose_ports_enabled_sabnzbd: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_sabnzbd) else False }}"
hmsdocker_expose_ports_enabled_tdarr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_tdarr) else False }}"
hmsdocker_expose_ports_enabled_homepage: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_homepage) else False }}"
hmsdocker_expose_ports_enabled_flaresolverr: '{{ True if (container_expose_ports) else False }}'
hmsdocker_expose_ports_enabled_uptimekuma: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_uptimekuma) else False }}"
hmsdocker_expose_ports_enabled_heimdall: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_heimdall) else False }}"
hmsdocker_expose_ports_enabled_readarr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_readarr) else False }}"
hmsdocker_expose_ports_enabled_kavita: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_kavita) else False }}"
hmsdocker_expose_ports_enabled_calibre: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_calibre) else False }}"
hmsdocker_expose_ports_enabled_jellyfin: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_jellyfin) else False }}"
hmsdocker_expose_ports_enabled_emby: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_emby) else False }}"
hmsdocker_expose_ports_enabled_maintainerr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_maintainerr) else False }}"
hmsdocker_expose_ports_enabled_lidarr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_lidarr) else False }}"
hmsdocker_expose_ports_enabled_autobrr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_autobrr) else False }}"
hmsdocker_expose_ports_enabled_notifiarr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_notifiarr) else False }}"
hmsdocker_expose_ports_enabled_speedtest: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_speedtest) else False }}"
hmsdocker_expose_ports_enabled_tinymediamanager: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_tinymediamanager) else False }}"
hmsdocker_expose_ports_enabled_pasta: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_pasta) else False }}"
hmsdocker_expose_ports_enabled_wizarr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_wizarr) else False }}"
hmsdocker_expose_ports_enabled_jellyseerr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_jellyseerr) else False }}"
hmsdocker_expose_ports_enabled_qbittorrent: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_qbittorrent) else False }}"
hmsdocker_expose_ports_enabled_deluge: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_deluge) else False }}"
hmsdocker_expose_ports_enabled_tubearchivist: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_tubearchivist) else False }}"
hmsdocker_expose_ports_enabled_huntarr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_huntarr) else False }}"
hmsdocker_expose_ports_enabled_pinchflat: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_pinchflat) else False }}"
hmsdocker_expose_ports_enabled_checkrr: "{{ True if (container_expose_ports or not hmsdocker_container_enabled_traefik or not hmsdocker_traefik_enabled_checkrr) else False }}"

# Authentik computed variables
# Controls global authentik variables
hmsdocker_authentik_enabled_globally: "{{ hmsdocker_container_enabled_authentik and traefik_ssl_enabled | default(False) }}"
hmsdocker_authentik_geoip_enabled: "{{ authentik_geoip_account_id != '' and authentik_geoip_license_key != '' | default(False) }}"

# Controls if a container is protected by Authentik via proxy
hmsdocker_authentik_enabled_traefik:          "{{ hms_docker_container_map['traefik']['authentik']           | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['traefik']['authentik_provider_type']           | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_sonarr:           "{{ hms_docker_container_map['sonarr']['authentik']            | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['sonarr']['authentik_provider_type']            | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_radarr:           "{{ hms_docker_container_map['radarr']['authentik']            | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['radarr']['authentik_provider_type']            | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_bazarr:           "{{ hms_docker_container_map['bazarr']['authentik']            | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['bazarr']['authentik_provider_type']            | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_transmission:     "{{ hms_docker_container_map['transmission']['authentik']      | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['transmission']['authentik_provider_type']      | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_portainer:        "{{ hms_docker_container_map['portainer']['authentik']         | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['portainer']['authentik_provider_type']         | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_overseerr:        "{{ hms_docker_container_map['overseerr']['authentik']         | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['overseerr']['authentik_provider_type']         | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_prowlarr:         "{{ hms_docker_container_map['prowlarr']['authentik']          | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['prowlarr']['authentik_provider_type']          | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_requestrr:        "{{ hms_docker_container_map['requestrr']['authentik']         | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['requestrr']['authentik_provider_type']         | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_plex:             "{{ hms_docker_container_map['plex']['authentik']              | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['plex']['authentik_provider_type']              | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_tautulli:         "{{ hms_docker_container_map['tautulli']['authentik']          | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['tautulli']['authentik_provider_type']          | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_nzbget:           "{{ hms_docker_container_map['nzbget']['authentik']            | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['nzbget']['authentik_provider_type']            | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_sabnzbd:          "{{ hms_docker_container_map['sabnzbd']['authentik']           | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['sabnzbd']['authentik_provider_type']           | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_authentik:        "{{ hms_docker_container_map['authentik']['authentik']         | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['authentik']['authentik_provider_type']         | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_tdarr:            "{{ hms_docker_container_map['tdarr']['authentik']             | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['tdarr']['authentik_provider_type']             | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_homepage:         "{{ hms_docker_container_map['homepage']['authentik']          | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['homepage']['authentik_provider_type']          | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_uptimekuma:       "{{ hms_docker_container_map['uptimekuma']['authentik']        | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['uptimekuma']['authentik_provider_type']        | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_heimdall:         "{{ hms_docker_container_map['heimdall']['authentik']          | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['heimdall']['authentik_provider_type']          | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_readarr:          "{{ hms_docker_container_map['readarr']['authentik']           | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['readarr']['authentik_provider_type']           | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_kavita:           "{{ hms_docker_container_map['kavita']['authentik']            | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['kavita']['authentik_provider_type']            | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_calibre:          "{{ hms_docker_container_map['calibre']['authentik']           | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['calibre']['authentik_provider_type']           | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_jellyfin:         "{{ hms_docker_container_map['jellyfin']['authentik']          | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['jellyfin']['authentik_provider_type']          | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_emby:             "{{ hms_docker_container_map['emby']['authentik']              | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['emby']['authentik_provider_type']              | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_maintainerr:      "{{ hms_docker_container_map['maintainerr']['authentik']       | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['maintainerr']['authentik_provider_type']       | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_lidarr:           "{{ hms_docker_container_map['lidarr']['authentik']            | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['lidarr']['authentik_provider_type']            | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_autobrr:          "{{ hms_docker_container_map['autobrr']['authentik']           | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['autobrr']['authentik_provider_type']           | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_notifiarr:        "{{ hms_docker_container_map['notifiarr']['authentik']         | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['notifiarr']['authentik_provider_type']         | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_speedtest:        "{{ hms_docker_container_map['speedtest-tracker']['authentik'] | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['speedtest-tracker']['authentik_provider_type'] | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_tinymediamanager: "{{ hms_docker_container_map['tinymediamanager']['authentik']  | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['tinymediamanager']['authentik_provider_type']  | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_pasta:            "{{ hms_docker_container_map['pasta']['authentik']             | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['pasta']['authentik_provider_type']             | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_wizarr:           "{{ hms_docker_container_map['wizarr']['authentik']            | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['wizarr']['authentik_provider_type']            | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_jellyseerr:       "{{ hms_docker_container_map['jellyseerr']['authentik']        | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['jellyseerr']['authentik_provider_type']        | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_qbittorrent:      "{{ hms_docker_container_map['qbittorrent']['authentik']       | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['qbittorrent']['authentik_provider_type']       | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_deluge:           "{{ hms_docker_container_map['deluge']['authentik']            | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['deluge']['authentik_provider_type']            | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_tubearchivist:           "{{ hms_docker_container_map['tubearchivist']['authentik']            | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['tubearchivist']['authentik_provider_type']            | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_huntarr:           "{{ hms_docker_container_map['huntarr']['authentik']            | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['huntarr']['authentik_provider_type']            | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_pinchflat:           "{{ hms_docker_container_map['pinchflat']['authentik']            | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['pinchflat']['authentik_provider_type']            | default('proxy') == 'proxy' }}"
hmsdocker_authentik_enabled_checkrr:           "{{ hms_docker_container_map['checkrr']['authentik']            | default(False) and hmsdocker_authentik_enabled_globally and hms_docker_container_map['checkrr']['authentik_provider_type']            | default('proxy') == 'proxy' }}"


# Homepage
# Controls if the integration with Homepage is enabled for a container
hmsdocker_homepage_enabled_traefik: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['traefik']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_sonarr: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['sonarr']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_radarr: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['radarr']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_bazarr: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['bazarr']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_transmission: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['transmission']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_portainer: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['portainer']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_overseerr: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['overseerr']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_prowlarr: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['prowlarr']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_plex: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['plex']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_tautulli: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['tautulli']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_nzbget: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['nzbget']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_sabnzbd: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['sabnzbd']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_authentik: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['authentik']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_tdarr: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['tdarr']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_readarr: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['readarr']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_jellyfin: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['jellyfin']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_emby: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['emby']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_lidarr: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['lidarr']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_autobrr: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['autobrr']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_jellyseerr: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['jellyseerr']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_qbittorrent: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['qbittorrent']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_deluge: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['deluge']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_tubearchivist: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['tubearchivist']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_huntarr: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['huntarr']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_pinchflat: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['pinchflat']['homepage'] | default(False) }}"
hmsdocker_homepage_enabled_checkrr: "{{ hmsdocker_container_enabled_homepage and hms_docker_container_map['checkrr']['homepage'] | default(False) }}"

# Controls if the container should show stats (CPU, RAM, RX, TX) on Homepage
hmsdocker_homepage_stats_enabled_traefik: "{{ hmsdocker_homepage_enabled_traefik and hms_docker_container_map['traefik']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_sonarr: "{{ hmsdocker_homepage_enabled_sonarr and hms_docker_container_map['sonarr']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_radarr: "{{ hmsdocker_homepage_enabled_radarr and hms_docker_container_map['radarr']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_bazarr: "{{ hmsdocker_homepage_enabled_bazarr and hms_docker_container_map['bazarr']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_transmission: "{{ hmsdocker_homepage_enabled_transmission and hms_docker_container_map['transmission']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_portainer: "{{ hmsdocker_homepage_enabled_portainer and hms_docker_container_map['portainer']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_overseerr: "{{ hmsdocker_homepage_enabled_overseerr and hms_docker_container_map['overseerr']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_prowlarr: "{{ hmsdocker_homepage_enabled_prowlarr and hms_docker_container_map['prowlarr']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_plex: "{{ hmsdocker_homepage_enabled_plex and hms_docker_container_map['plex']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_tautulli: "{{ hmsdocker_homepage_enabled_tautulli and hms_docker_container_map['tautulli']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_nzbget: "{{ hmsdocker_homepage_enabled_nzbget and hms_docker_container_map['nzbget']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_sabnzbd: "{{ hmsdocker_homepage_enabled_sabnzbd and hms_docker_container_map['sabnzbd']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_authentik: "{{ hmsdocker_homepage_enabled_authentik and hms_docker_container_map['authentik']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_tdarr: "{{ hmsdocker_homepage_enabled_tdarr and hms_docker_container_map['tdarr']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_readarr: "{{ hmsdocker_homepage_enabled_readarr and hms_docker_container_map['readarr']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_jellyfin: "{{ hmsdocker_homepage_enabled_jellyfin and hms_docker_container_map['jellyfin']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_emby: "{{ hmsdocker_homepage_enabled_emby and hms_docker_container_map['emby']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_lidarr: "{{ hmsdocker_homepage_enabled_lidarr and hms_docker_container_map['lidarr']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_autobrr: "{{ hmsdocker_homepage_enabled_autobrr and hms_docker_container_map['autobrr']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_jellyseerr: "{{ hmsdocker_homepage_enabled_jellyseerr and hms_docker_container_map['jellyseerr']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_qbittorrent: "{{ hmsdocker_homepage_enabled_qbittorrent and hms_docker_container_map['qbittorrent']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_deluge: "{{ hmsdocker_homepage_enabled_deluge and hms_docker_container_map['deluge']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_tubearchivist: "{{ hmsdocker_homepage_enabled_tubearchivist and hms_docker_container_map['tubearchivist']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_huntarr: "{{ hmsdocker_homepage_enabled_huntarr and hms_docker_container_map['huntarr']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_pinchflat: "{{ hmsdocker_homepage_enabled_pinchflat and hms_docker_container_map['pinchflat']['homepage_stats'] | default(False) }}"
hmsdocker_homepage_stats_enabled_checkrr: "{{ hmsdocker_homepage_enabled_checkrr and hms_docker_container_map['checkrr']['homepage_stats'] | default(False) }}"

#######################################################################



#######################################################################
### Misc
hmsdocker_primary_mount_path: "{{ hms_docker_mount_path }}/{{ hms_docker_primary_mount_name }}"
# This just combines the mount path and media folder name, recommended to leave this alone // default: "{{ hmsdocker_primary_mount_path }}/{{ hms_docker_library_folder_name }}"
hmsdocker_library_path: "{{ hmsdocker_primary_mount_path }}/{{ hms_docker_library_folder_name }}"
#######################################################################



#######################################################################
### Advanced Ansible settings
# Overrides the family to 'redhat' if running Alma Linux
hmsdocker_family_override: "{{ 'redhat' if ansible_os_family | lower == 'almalinux' else ansible_os_family | lower }}"

# Which python interpreter to use, only change if you're an advanced user and know what you're doing
ansible_python_interpreter: /usr/bin/python3
#######################################################################
